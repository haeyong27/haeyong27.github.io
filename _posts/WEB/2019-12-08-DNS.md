---
layout: post
title:  "DNS"
date:   2019-12-08
categories: WEB
tag: [WEB]
---



# 도메인의 구조
blog.example.com
blog : sub
example : second-level
com : top-level
각 레벨별로 전담하는 서버가 따로있다. 
top level의 서버는 second-level의 도메인의 서버 주소들을 각각 알고있고
second-level의 서버는 sub 도메인 서버의 주소들을 알고있다. 



# DNS가 돌아가는 모습은 크게 3가지
1. 도매인 구매 
IP(93.143.232.123)에 도메인 네임을 등록하고 싶다면 도메인을 구입해야한다. 
우선 두가지 기관에 대해 알아야 한다. 
등록대행자 : 도메인을 구입을 대행 ex) 가비아
등록소 : top level domain( .com .net 등)을 관리하는 기관

2. 도매인 등록
도메인에 아이피를 연결하기 위해서는 도메인 네임 서버가 필요하다. 
등록대행자가 example.com에 대한 정보(도메인 네임과 IP주소)와 네임서버의 주소를 등록소에 저장한다.

3. 클라이언트가 도메인 주소로 아이피 주소를 알아내기 
통신업체에서 도메인 서버의 주소를 알려준다. 아직 그 주소로 가도 도메인 네임의 아이피 주소를 모른다. 하지만 루트 네임서버에게 물어본다. 그러면 top level 도메인을 관리하는 기관의 서버주소를 알려준다. 거기에 가면 example.com의 아이피가 적혀있는 서버의 주소를 알 수 있다. 

도메인 서버의 기능 2가지 
1. 도메인에 대한 IP를 기억
2. 클라이언트가 요청하면 IP를 알려주는 기능

# 레코드와 CNAME
도메인 이름과 IP를 묶은 정보 한 건을 레코드라고 한다. 
A : 도메인 주소에 대한 IP 주소
CNAME : 원래 도메인 주소에 대한 별명
예를들어
A타입으로 example.com 으로 접속하면 192.0.0.1 로 맵핑해주듯
CNAME은 www.example.com 를 example.com 로 맵핑해준다. 

## cname이 있음으로해서 생기는 장점
여러 도메인의 주소가 하나의 아이피를 가리키는 상황이다. 여러 도메인의 주소가 하나의 a타입 레코드를 바라보도록 하면 아이피가 변경될 상황에서 a타입의 아이피만 변경해주면 나머지 도메인주소의 아이피도 한번에 바꾸는 효과가 생긴다. 